<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Conclusion: Heritage as Strategy</title>
    
    <link href="https://unpkg.com/maplibre-gl@4.7.1/dist/maplibre-gl.css" rel="stylesheet">
    <script src="https://unpkg.com/maplibre-gl@4.7.1/dist/maplibre-gl.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        
        #map {
            position: absolute;
            top: 0;
            bottom: 0;
            width: 100%;
        }
        
        .map-overlay {
            position: absolute;
            top: 70px;
            left: 20px;
            background: white;
            padding: 25px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.15);
            max-width: 450px;
            z-index: 1;
            max-height: calc(100vh - 150px);
            overflow-y: auto;
            transition: transform 0.3s ease, opacity 0.3s ease;
        }
        
        .map-overlay.collapsed {
            transform: translateX(-490px);
            opacity: 0;
            pointer-events: none;
        }
        
        .toggle-sidebar-btn {
            color: #222;
            position: absolute;
            top: 80px;
            left: 20px;
            background: white;
            border: none;
            padding: 10px 15px;
            border-radius: 6px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
            cursor: pointer;
            font-size: 18px;
            z-index: 2;
            transition: all 0.2s;
        }
        
        .toggle-sidebar-btn:hover {
            background: #f0f0f0;
            box-shadow: 0 2px 12px rgba(0,0,0,0.2);
        }
        
        .toggle-sidebar-btn.sidebar-open {
            left: 490px;
        }
        
        h1 {
            color: #222;
            font-size: 24px;
            margin-bottom: 10px;
            color: #222;
            line-height: 1.3;
        }
        
        .conclusion-text {
            font-size: 14px;
            color: #222;
            line-height: 1.7;
            margin-bottom: 15px;
        }
        
        .conclusion-text p {
            margin-bottom: 12px;
        }
        
        .conclusion-text strong {
            color: #000000;
        }
        
        
        
        
        
        
        
        .timeline-item {
            border-left: 3px solid #3498db;
            padding-left: 15px;
            margin-bottom: 15px;
        }
        
        .timeline-year {
            font-weight: 700;
            font-size: 14px;
            color: #3498db;
            margin-bottom: 5px;
        }
        
        .timeline-site {
            font-size: 13px;
            color: #222;
            margin-bottom: 3px;
        }
        
        .timeline-note {
            font-size: 12px;
            color: #222;
            font-style: italic;
        }
        
        
        
        
        
        
        
        
        
        
        
        .legend {
            margin-top: 15px;
            padding: 12px;
            background: #f8f9fa;
            border-radius: 6px;
        }
        
        .legend-title {
            font-weight: 600;
            font-size: 12px;
            color: #222;
            margin-bottom: 8px;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            font-size: 12px;
            margin-bottom: 5px;
        }
        
        .legend-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .maplibregl-popup-content {
            padding: 15px;
            max-width: 280px;
        }
        
        .popup-title {
            font-weight: bold;
            font-size: 14px;
            margin-bottom: 8px;
            color: #222;
        }
        
        .popup-field {
            margin-bottom: 5px;
            font-size: 12px;
        }

        
        
        
        
        
        
        
        
        
        
        
    </style>
</head>
<body>
    <nav style="position: absolute; top: 0; left: 0; right: 0; background: rgba(255,255,255,0.95); color: #000000; padding: 15px 20px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); z-index: 10; display: flex; gap: 15px; align-items: center;">
        <span style="font-weight: 600; font-size: 14px; color: #222;">UNESCO Heritage Atlas:</span>
        <a href="intro.html" style="color: #222; text-decoration: none; font-size: 14px; padding: 5px 10px;">Introduction</a>
        <a href="global.html" style="color: #222; text-decoration: none; font-size: 14px; padding: 5px 10px;">Global View</a>
        <a href="index.html" style="color: #222; text-decoration: none; font-size: 14px; padding: 5px 10px;">Regional Overview</a>
        <a href="timeline.html" style="color: #222; text-decoration: none; font-size: 14px; padding: 5px 10px;">Timeline</a>
        <a href="bukhara.html" style="color: #222; text-decoration: none; font-size: 14px; padding: 5px 10px;">Bukhara Detail</a>
        <a href="conclusion.html" style="color: #0066cc; text-decoration: none; font-size: 14px; padding: 5px 10px; background: #e3f2fd; border-radius: 4px;">Conclusion</a>
        <a href="contact.html" style="color: #222; text-decoration: none; font-size: 14px; padding: 5px 10px;">Contact</a>
    </nav>
    
    <div id="map"></div>
    
    <button class="toggle-sidebar-btn sidebar-open" id="toggleSidebar" title="Hide/Show Info Panel">◀</button>
    
    <div class="map-overlay" id="mapOverlay">
        <h1>Heritage as Strategy: Ukraine in Conflict</h1>
        
        <div class="conclusion-text">
            <p>
                Ukraine's UNESCO inscriptions reveal how heritage designation becomes a strategic tool during geopolitical conflict. Between 1990 and 2023, Ukraine inscribed 7 World Heritage Sites with the most recent inscription occurring during active war.
            </p>
        </div>
        
        
        
        
        
        
        
        <div class="conclusion-text">
            <p>
                This timing is not coincidental. UNESCO World Heritage designation carries international legal weight under the 1954 Hague Convention, which provides additional protections for cultural property during armed conflict. By securing inscription during wartime, Ukraine leveraged heritage frameworks as a diplomatic and protective strategy.
            
            <p>
                Ukraine's ensemble preference mirrors broader post-Soviet patterns: Of Ukraine's 5 individual cultural sites, 3 are ensembles (60%), consistent with the 62.5% post-Soviet ensemble rate. Like Uzbekistan, Ukraine inherited comprehensive Soviet property systems that enabled rapid ensemble inscription of entire historic districts.
            </p>
        </div>
        
        <div style="margin: 20px 0;">
            <div style="font-weight: 600; font-size: 13px; color: #222; margin-bottom: 10px;">Ukraine's UNESCO Timeline:</div>
            
            <div class="timeline-item">
                <div class="timeline-year">1990</div>
                <div class="timeline-site">Kyiv: Saint-Sophia Cathedral</div>
                <div class="timeline-note">Soviet-era inscription</div>
            </div>
            
            <div class="timeline-item">
                <div class="timeline-year">1998</div>
                <div class="timeline-site">L'viv Historic Centre (Ensemble)</div>
            </div>
            
            <div class="timeline-item">
                <div class="timeline-year">2013</div>
                <div class="timeline-site">Ancient City of Tauric Chersonese (Ensemble)</div>
                <div class="timeline-note">Located in Crimea—later annexed by Russia</div>
            </div>
            
            <div class="timeline-item">
                <div class="timeline-year">2023</div>
                <div class="timeline-site">Historic Centre of Odesa (Ensemble)</div>
                <div class="timeline-note" style="color: #e74c3c; font-weight: 600;">Inscribed during active conflict + placed on Danger List</div>
            </div>
        </div>
    

    <script>
        const style = {
            "version": 8,
            "sources": {
                "carto": {
                    "type": "raster",
                    "tiles": ["https://a.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}.png"],
                    "tileSize": 256
                }
            },
            "layers": [{
                "id": "background",
                "type": "raster",
                "source": "carto"
            }]
        };

        const map = new maplibregl.Map({
            container: 'map',
            style: style,
            center: [31, 48],
            zoom: 5.5
        });

        map.addControl(new maplibregl.NavigationControl(), 'top-left');

        // Toggle sidebar functionality
        const toggleBtn = document.getElementById('toggleSidebar');
        const overlay = document.getElementById('mapOverlay');
        let sidebarOpen = true;

        toggleBtn.addEventListener('click', function() {
            sidebarOpen = !sidebarOpen;
            
            if (sidebarOpen) {
                overlay.classList.remove('collapsed');
                toggleBtn.classList.add('sidebar-open');
                toggleBtn.innerHTML = '◀';
                toggleBtn.title = 'Hide Info Panel';
            } else {
                overlay.classList.add('collapsed');
                toggleBtn.classList.remove('sidebar-open');
                toggleBtn.innerHTML = '▶';
                toggleBtn.title = 'Show Info Panel';
            }
        });

        map.on('load', function() {
            fetch('unesco_sites.geojson')
                .then(response => response.json())
                .then(data => {
                    // Filter for Ukraine sites only
                    const ukraineSites = {
                        type: 'FeatureCollection',
                        features: data.features.filter(f => 
                            f.properties.country === 'Ukraine'
                        )
                    };

                    map.addSource('ukraine-sites', {
                        type: 'geojson',
                        data: ukraineSites
                    });

                    // Add circles for sites
                    map.addLayer({
                        'id': 'ukraine-circles',
                        'type': 'circle',
                        'source': 'ukraine-sites',
                        'paint': {
                            'circle-radius': [
                                'case',
                                ['==', ['get', 'year'], 2023],
                                14, // Larger for Odesa
                                10
                            ],
                            'circle-color': [
                                'case',
                                ['==', ['get', 'year'], 2023],
                                '#e74c3c', // Red for 2023 inscription
                                ['==', ['get', 'type'], 'Ensemble'],
                                '#3498db', // Blue for ensembles
                                '#95a5a6' // Gray for monuments
                            ],
                            'circle-stroke-width': [
                                'case',
                                ['==', ['get', 'year'], 2023],
                                4, // Thicker stroke for 2023
                                2
                            ],
                            'circle-stroke-color': '#ffffff',
                            'circle-opacity': 0.9
                        }
                    });

                    // Add labels for key sites
                    map.addLayer({
                        'id': 'site-labels',
                        'type': 'symbol',
                        'source': 'ukraine-sites',
                        'layout': {
                            'text-field': ['get', 'name'],
                            'text-font': ['Open Sans Regular'],
                            'text-size': 11,
                            'text-offset': [0, 1.5],
                            'text-anchor': 'top',
                            'text-max-width': 10
                        },
                        'paint': {
                            'text-color': '#222',
                            'text-halo-color': '#ffffff',
                            'text-halo-width': 2
                        }
                    });

                    // Popups
                    const popup = new maplibregl.Popup({
                        closeButton: true,
                        closeOnClick: false
                    });

                    map.on('click', 'ukraine-circles', function(e) {
                        const props = e.features[0].properties;
                        const coordinates = e.features[0].geometry.coordinates.slice();

                        let conflictNote = '';
                        if (props.year === 2023) {
                            conflictNote = '<div style="margin-top: 8px; padding: 8px; background: #fff8e1; border-radius: 4px; font-size: 11px; color: #d68910;"><strong>⚠️ Inscribed during conflict (January 2023)</strong><br>Placed on Danger List simultaneously</div>';
                        }

                        const popupContent = `
                            <div class="popup-title">${props.name}</div>
                            <div class="popup-field"><strong>Type:</strong> ${props.type}</div>
                            <div class="popup-field"><strong>Year Inscribed:</strong> ${props.year || 'N/A'}</div>
                            ${conflictNote}
                        `;

                        popup.setLngLat(coordinates)
                            .setHTML(popupContent)
                            .addTo(map);
                    });

                    map.on('mouseenter', 'ukraine-circles', function() {
                        map.getCanvas().style.cursor = 'pointer';
                    });

                    map.on('mouseleave', 'ukraine-circles', function() {
                        map.getCanvas().style.cursor = '';
                    });
                })
                .catch(error => console.error('Error:', error));
        });
    </script>
</body>
</html>
